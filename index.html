<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Arepita</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:'Playfair Display', serif;
  background:linear-gradient(180deg,#0f2027,#203a43,#2c5364);
}

/* ===== MENÚ ☰ ===== */
.menu-toggle{
  position:fixed;
  top:14px;
  left:14px;
  font-size:1.8rem;
  cursor:pointer;
  color:#fff;
  z-index:100;
}

.side-menu{
  position:fixed;
  top:0;
  left:-260px;
  width:240px;
  height:100%;
  background:#fdf8f2;
  box-shadow:5px 0 15px rgba(0,0,0,.3);
  padding:1rem;
  transition:0.3s;
  z-index:99;
}

.side-menu.active{left:0;}

.side-menu h3{margin-top:0;}

.fav-item{
  cursor:pointer;
  padding:0.4rem;
  border-bottom:1px solid #ddd;
}
.fav-item:hover{background:#eee;}

/* ===== TÍTULO ===== */
header{
  text-align:center;
  padding:1.2rem;
  color:#fff;
}
header h1{margin:0;font-size:2.5rem;}

/* ===== REPRODUCTOR ===== */
.player{
  max-width:720px;
  margin:0 auto;
  background:#fdf8f2;
  padding:0.6rem;
  border-radius:6px;
  display:flex;
  align-items:center;
  gap:0.4rem;
}

.player button{
  background:none;
  border:none;
  font-size:1.2rem;
  cursor:pointer;
}

.progress{flex:1;}

.song-name{
  text-align:center;
  font-size:0.85rem;
  color:#333;
  margin:0.3rem auto 1rem;
  max-width:720px;
}

/* ===== LIBRO ===== */
main{
  display:flex;
  justify-content:center;
  padding:1rem;
}

.page{
  display:none;
  background:#fdf8f2;
  max-width:720px;
  width:100%;
  padding:2rem;
  border-radius:6px;
  box-shadow:0 10px 25px rgba(0,0,0,.35);
  position:relative;
}

.page.active{display:block;}

.poem-content{
  height:420px;
  overflow-y:auto;
  line-height:1.8;
}

/* ===== FAVORITO ♥ ===== */
.favorite{
  position:absolute;
  top:18px;
  right:18px;
  font-size:1.5rem;
  cursor:pointer;
  color:#bbb;
}
.favorite.active{color:#c0392b;}

/* ===== NAVEGACIÓN ===== */
.page-nav{text-align:center;margin-top:0.8rem;}
.page-nav button{
  border:1px solid #333;
  background:none;
  border-radius:50%;
  width:32px;
  height:32px;
  margin:0 4px;
}
</style>
</head>

<body>

<!-- MENÚ -->
<div class="menu-toggle" onclick="toggleMenu()">☰</div>
<div class="side-menu" id="sideMenu">
  <h3>Favoritos ❤️</h3>
  <div id="favList"></div>
</div>

<header>
  <h1>Arepita</h1>
</header>

<div class="player">
  <button onclick="prevSong()">⏮️</button>
  <button onclick="togglePlay()">▶️</button>
  <button onclick="nextSong()">⏭️</button>
  <input type="range" class="progress">
</div>

<div class="song-name" id="songName">—</div>
<audio id="audio"></audio>

<main>

<section class="page active" data-page="0" data-title="Fuego a la distancia">
<span class="favorite" onclick="toggleFavorite(0)">♥</span>
<h2>Fuego a la distancia</h2>
<div class="poem-content">
Entre mares y kilómetros se esconde tu voz, y aun así, me alcanza...
</div>
<div class="page-nav">
<button onclick="showPage(0)">1</button>
<button onclick="showPage(1)">2</button>
<button onclick="showPage(2)">3</button>
<button onclick="showPage(3)">4</button>
</div>
</section>

<section class="page" data-page="1" data-title="Mientras tanto">
<span class="favorite" onclick="toggleFavorite(1)">♥</span>
<h2>Mientras tanto</h2>
<div class="poem-content">
No te tengo, pero te sostengo en la calma...
</div>
<div class="page-nav">
<button onclick="showPage(0)">1</button>
<button onclick="showPage(1)">2</button>
<button onclick="showPage(2)">3</button>
<button onclick="showPage(3)">4</button>
</div>
</section>

<section class="page" data-page="2" data-title="Te anhelo">
<span class="favorite" onclick="toggleFavorite(2)">♥</span>
<h2>Te anhelo</h2>
<div class="poem-content">
Como el cielo anhela al sol cuando cae la tarde...
</div>
<div class="page-nav">
<button onclick="showPage(0)">1</button>
<button onclick="showPage(1)">2</button>
<button onclick="showPage(2)">3</button>
<button onclick="showPage(3)">4</button>
</div>
</section>

<section class="page" data-page="3" data-title="Destino">
<span class="favorite" onclick="toggleFavorite(3)">♥</span>
<h2>Destino</h2>
<div class="poem-content">
Hay mujeres bellas, y luego estás tú...
</div>
<div class="page-nav">
<button onclick="showPage(0)">1</button>
<button onclick="showPage(1)">2</button>
<button onclick="showPage(2)">3</button>
<button onclick="showPage(3)">4</button>
</div>
</section>

</main>

<script>
const pages=document.querySelectorAll('.page');
const favList=document.getElementById("favList");

function showPage(n){
  pages.forEach(p=>p.classList.remove('active'));
  pages[n].classList.add('active');
}

function toggleMenu(){
  document.getElementById("sideMenu").classList.toggle("active");
}

function getFavorites(){
  return JSON.parse(localStorage.getItem("favorites")||"[]");
}

function saveFavorites(f){ localStorage.setItem("favorites",JSON.stringify(f)); }

function toggleFavorite(i){
  let favs=getFavorites();
  if(favs.includes(i)) favs=favs.filter(x=>x!==i);
  else favs.push(i);
  saveFavorites(favs);
  updateFavorites();
}

function updateFavorites(){
  document.querySelectorAll(".favorite").forEach(f=>f.classList.remove("active"));
  favList.innerHTML="";
  getFavorites().forEach(i=>{
    document.querySelector(`.page[data-page="${i}"] .favorite`).classList.add("active");
    const title=document.querySelector(`.page[data-page="${i}"]`).dataset.title;
    const div=document.createElement("div");
    div.className="fav-item";
    div.textContent=title;
    div.onclick=()=>{showPage(i);toggleMenu();}
    favList.appendChild(div);
  });
}

updateFavorites();

/* Música mínima */
const songs=["Combustión - Jósean Log(MP3_160K).mp3"];
const audio=document.getElementById("audio");
const songName=document.getElementById("songName");
audio.src=songs[0];
songName.textContent=songs[0].replace(/\(.*?\)|\.mp3/g,"");
function togglePlay(){audio.paused?audio.play():audio.pause();}
function nextSong(){}
function prevSong(){}
</script>

</body>
</html>
